<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <title>TODO List</title>
</head>

<body>
    <div class="container-fluid">
        <div class="alert alert-primary ">

            <h3 style="text-align:center;">TODOs LIST:Your Personal Todo List</h3>

        </div>

        <div class="container ">
            <div class="mb-3">
                <label for="title">Title</label>
                <input type="text" class="form-control" id="title" aria-describedby="emailHelp">

            </div>

            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <textarea class="form-control" id="description" rows="3"></textarea>
            </div>

            <button type="submit" id="add" class="btn btn-primary">ADD item</button>
            <button  id="clear" class="btn btn-danger" onclick="clearStorage()">Clear list</button>
            <hr>

            <div class="alert alert-primary my-4" id="items">

                <h3 style="text-align:center;">ITEMS</h3>

            </div>
            <div>
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">Sr.no.</th>
                            <th scope="col">Title</th>
                            <th scope="col">Item Description</th>
                            <th scope="col">Action</th>
                        </tr>
                    </thead>
                    <tbody id="tablebody">
                        <tr>
                            <th scope="row">1</th>
                            <td>Mark</td>
                            <td>Ottoa</td>
                            <td><button id="demo" class="btn btn-danger">Delete</td>
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>



    </div>
    <script>


       let arr = [];
        let tit;
        let des;
console.log(tit,des)
function getupdate(){
    tit = document.getElementById('title').value;
            des = document.getElementById('description').value;
           
             if (localStorage.getItem('arjson') == null) {
                
                arr = [];
                arr.push([tit, des]);
                localStorage.setItem('arjson', JSON.stringify(arr));
            }
            else {
                Strin = localStorage.getItem('arjson');
                arr = JSON.parse(Strin);
                arr.push([tit, des]);
                localStorage.setItem('arjson', JSON.stringify(arr));

            }
            update();
}
        function update() {
            if (localStorage.getItem('arjson') == null) {
              
                arr = [];
              
                localStorage.setItem('arjson', JSON.stringify(arr));
            }
            else {
                Strin = localStorage.getItem('arjson');
               
                arr = JSON.parse(Strin);
            }
           



            let tablebody = document.getElementById("tablebody");

            let str = "";
            arr.forEach((element, index) => {

                str += ` 
                       <tr>
                            <th scope="row">${index + 1}</th>
                            <td>${element[0]}</td>
                            <td>${element[1]}</td>
                            <td><button class="btn btn-sm btn-primary" onclick="deleted(${index})">Delete</button></td> 
                        </tr>`;

            });
            tablebody.innerHTML = str;
        }
        add = document.getElementById("add");
        add.addEventListener("click", getupdate);

        update();

        function deleted(indexitem){
        Strin = localStorage.getItem('arjson');
        arr = JSON.parse(Strin);
        arr.splice(indexitem,1);
        localStorage.setItem('arjson', JSON.stringify(arr));
        update();
        }
        function clearStorage(){
                if (confirm("Do you areally want to clear?")){
                console.log('Clearing the storage')
                localStorage.clear();
                update()
                }
            }


    </script>
</body>

</html>